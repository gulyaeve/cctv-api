{% extends "base.html" %}

{% block content %}
    <div class="container-xxl">
      <!--Section: Content-->
      <div class="row m-0">
        <div class="col-9 p-0">
          <div class="video-wall">
              {% for camera in cameras %}
                {% if cameras.index(camera) == 0 || 2 %}
                  <div class="video-wall-string d-flex">
                {% endif %}
                <div class="video d-inline">
                  <a href="#" data-toggle="modal" data-target="#cam{{ cameras.index(camera) + 1 }}"><img src="/pages/camera_view/{{ camera.id }}" alt=""></a>
                </div> 
                {% if cameras.index(camera) == 0 || 2 %}
                  </div>
                {% endif %}
              {% endfor %}
          </div>
          <div class="row m-0">
            <div class="col-4 pl-3 pr-0 pt-3 m-0">
              <div class="control-panel-meta">
                <div class="control-panel-meta-head">
                  Информация
                  <hr class="mt-1">
                </div>
                <div class="control-panel-meta-data overflow-auto">
                  <b>Кабинет:</b> {{ monitoring_data.current_classroom }}<br>
                  <b>Корпус:</b> {{ monitoring_data.current_building}}<br>
                  <br>
                  <b>Занятие:</b><br>
                  {{ monitoring_data.current_subject }}<br>
                  <b>Время занятия:</b> {{ monitoring_data.timestamp_start.strftime('%H:%M') }} - {{ monitoring_data.timestamp_end.strftime('%H:%M') }}<br>
                  <b>Преподаватель:</b><br>
                  {{ monitoring_data.current_teacher }}<br>
                  <b>Группа:</b><br>
                  {{ monitoring_data.current_group }}<br>
                </div>
              </div>
            </div>
            <div class="col-8 p-3 m-0">
              <div class="control-panel-addinc">
                <div class="control-panel-buttons d-flex">
                  <button class="control-panel-btn btn-inc-alright" type="button" name="button">Всё хорошо</button>
                  <button class="control-panel-btn btn-inc-control" type="button" name="button">Контроль</button>
                  <button class="control-panel-btn btn-inc-alert" type="button" name="button">Инцидент</button>
                </div>

                <div class="control-panel-details st-inc-control d-none">
                  <div class="row">
                    <div class="col-6">
                      <b>Быстрый ввод</b>
                      <button class="control-panel-btn" type="button" name="button">Студент(ы) спит(ят)</button>
                      <button class="control-panel-btn" type="button" name="button">Преподаватель отсутствует</button>
                      <button class="control-panel-btn" type="button" name="button">Преподаватель спит</button>
                      <button class="control-panel-btn" type="button" name="button">Студенты бездельничают</button>
                    </div>
                    <div class="col-6">
                      <b>Комментарий:</b>
                      <textarea class="control-panel-details-textarea" name="comment" rows="8"></textarea>
                      <button class="control-panel-btn" type="button" name="button">Отправить информацию</button>
                    </div>
                  </div>
                </div>

                <div class="control-panel-details st-inc-alert d-none">
                  <div class="row">
                    <div class="col-6">
                      <b>Быстрый ввод</b>
                      <button class="control-panel-btn" type="button" name="button">Студент(ы) спит(ят)</button>
                      <button class="control-panel-btn" type="button" name="button">Преподаватель отсутствует</button>
                      <button class="control-panel-btn" type="button" name="button">Преподаватель спит</button>
                      <button class="control-panel-btn" type="button" name="button">Студенты бездельничают</button>
                      <button class="control-panel-btn" type="button" name="button">Камера не работает</button>
                    </div>
                    <div class="col-6">
                      <b>Комментарий:</b>
                      <textarea class="control-panel-details-textarea" name="comment" rows="8"></textarea>
                      <button class="control-panel-btn" type="button" name="button">Отправить информацию</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-3 p-0">
          <div class="status-log d-flex flex-column overflow-auto">
            <div class="status inc-alright d-block">
              <div class="status-head-placeholder d-flex">
                <img class="d-inline" src="{{ url_for('static', path='img/alright.png') }}" alt="">
                <div class="status-head">Всё хорошо</div>
              </div>
              <hr class="mt-0">
              <div class="status-inc-description">
                <b>Визор:</b> Иванов И.<br>
                <b>Время:</b> 13.01.2026 09:30<br>
                <br>
                <b>Занятие:</b><br>
                Веб-разработка<br>
                <b>Преподаватель:</b><br>
                Мызников В.<br>
                <b>Группа:</b><br>
                2ИП-1-24<br>
              </div>
            </div>
            <div class="status inc-control d-block">
              <div class="status-head-placeholder d-flex">
                <img class="d-inline" src="img/control.png" alt="">
                <div class="status-head">Контроль</div>
              </div>
              <hr class="mt-0">
              <div class="status-inc-description">
                <b>Визор:</b> Иванов И.<br>
                <b>Время:</b> 13.01.2026 09:30<br>
                <br>
                <b>Занятие:</b><br>
                Веб-разработка<br>
                <b>Преподаватель:</b><br>
                Мызников В.<br>
                <b>Группа:</b><br>
                2ИП-1-24<br>
                <br>
                <b>Контроль:</b><br>
                Студент спит, преподаватель его не видит.<br>
              </div>
            </div>
            <div class="status inc-alert d-block">
              <div class="status-head-placeholder d-flex">
                <img class="d-inline" src="img/alert.png" alt="">
                <div class="status-head">Инцидент</div>
              </div>
              <hr class="mt-0">
              <div class="status-inc-description">
                <b>Визор:</b> Иванов И.<br>
                <b>Время:</b> 13.01.2026 09:30<br>
                <br>
                <b>Занятие:</b><br>
                Веб-разработка<br>
                <b>Преподаватель:</b><br>
                Мызников В.<br>
                <b>Группа:</b><br>
                2ИП-1-24<br>
                <br>
                <b>Контроль:</b><br>
                Студент спит продолжительное время, преподаватель не обращает на него внимание.<br>
              </div>
            </div>
            <div class="status inc-alert d-block">
              <div class="status-head-placeholder d-flex">
                <img class="d-inline" src="img/alert.png" alt="">
                <div class="status-head">Инцидент</div>
              </div>
              <hr class="mt-0">
              <div class="status-inc-description">
                <b>Визор:</b> Иванов И.<br>
                <b>Время:</b> 13.01.2026 09:30<br>
                <br>
                <b>Занятие:</b><br>
                Веб-разработка<br>
                <b>Преподаватель:</b><br>
                Мызников В.<br>
                <b>Группа:</b><br>
                2ИП-1-24<br>
                <br>
                <b>Контроль:</b><br>
                Студент спит продолжительное время, преподаватель не обращает на него внимание.<br>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% for camera in cameras %}
  <div class="modal fade" id="cam{{ cameras.index(camera) + 1 }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Камера №{{ cameras.index(camera) + 1 }} | {{ monitoring_data.current_classroom }}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <img src="/pages/camera_view/{{ camera.id }}" alt="">
        </div>
      </div>
    </div>
  </div>
{% endfor %}
{% endblock %}

